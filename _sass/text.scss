// -------------------------------------------------------- headers

h1, h2, h3, h4, h5, h6 {
  font-family: $font-family-h;
  letter-spacing: var(--letter-tight);
  text-rendering: geometricPrecision;
  scroll-margin-top: 5rem;
  font-weight: var(--weight-regular);
  color: var(--text-secondary);
  margin-top: var(--space-l);
  margin-bottom: var(--space-b);
}

h1 {
  font-size: var(--font-h1);
  line-height: var(--line-xs);
}
h2 {
  font-size: var(--font-h2);
  line-height: var(--line-xs);
}
h3 {
  font-size: var(--font-h3);
  line-height: var(--line-xs);
  display: inline-block;
}
h4 {
  font-size: var(--font-h4);
  line-height: var(--line-xs);
  display: inline-block;
}
h5 {
  font-size: var(--font-h5);
  line-height: var(--line-xs);
  display: inline-block;
}
h6 {
  font-size: var(--font-h6);
  line-height: var(--line-xs);
  text-transform: uppercase;
  display: inline-block;
}

// -------------------------------------------------------- body

p {
  font-size: var(--font-b);
  line-height: var(--line-b);
  letter-spacing: var(--letter-base);
  color: var(--text);
  margin-top: 0;
  margin-bottom: var(--space-b);
}


table, figcaption {
  font-size: var(--font-b);
  line-height: var(--line-b);
  letter-spacing: var(--letter-base);
  color: var(--text);
  margin-top: 0;
  margin-bottom: var(--space-b);
}

strong, b {
  font-weight: var(--weight-bold);
}

em, i {
  font-style: italic;
}

small {
  font-size: var(--font-s);
  color: var(--text);
  line-height: 1.4;
}

figcaption {
  font-size: var(--font-s);
  line-height: 1.4em;
  color: var(--text-secondary);
  text-align: center;
  margin-top: 0.5rem;
}

a {
  color: var(--links);
  text-decoration: underline;

  &:hover {
    color: var(--links-hover);
    text-decoration: line-through;
  }
}

// -------------------------------------------------------- code

p {
  code {
    display: block;
    font-family: $font-family-m;
    letter-spacing: -0.02rem;
    font-size: var(--font-mono);
    font-weight: var(--weight-regular);
    line-height: calc(var(--space-b) * 1.2) !important;
    color: var(--text);
  }
}

code {
  font-family: $font-family-m;
  letter-spacing: -0.02rem;
  font-size: var(--font-mono);
  font-weight: var(--weight-regular);
  line-height: calc(var(--space-b) * 0.5) !important;
  color: var(--text);
}

pre {
  position: relative;
  margin: var(--space-b) 0;
  line-height: 1rem;

  &::before {
    content: ">";
    left: 0;
    top: 0;
    font-family: $font-family-m;
    letter-spacing: -0.02rem;
    font-size: var(--font-mono);
    color: var(--links);
    pointer-events: none;
  }
}

// -------------------------------------------------------- lists

ul,
ol {
  margin: 0 0 var(--space-b) 0;
  padding-left: 1.5em;
  width: fit-content;
}

li {
  font-size: var(--font-b);
  line-height: 1.6;
  letter-spacing: var(--letter-base);
  color: var(--text);
  margin-top: 0;
  margin-bottom: var(--space-b);
}

li ul,
li ol {
  margin-top: calc(var(--space-b) * 0.25);
  margin-bottom: calc(var(--space-b) * 0.5);
  padding-left: 2em;
  list-style-type: disc;
}

li ul li {
  list-style-type: disc;
}

ul li {
  list-style-type: disc;
}

ul ul li {
  list-style-type: circle;
}

ul ul ul li {
  list-style-type: square;
}

ol li {
  list-style-type: decimal;
}

// -------------------------------------------------------- blockquote

blockquote {
  font-family: $font-family-h;
  font-size: var(--font-quote-l);
  letter-spacing: -0.07rem;
  text-align: center;
  line-height: 1;
  font-weight: var(--weight-medium);
  color: var(--text);
  overflow-wrap: break-word;
  align-self: center;
  margin: var(--space-quote-top) 0;

  > p {
    display: inline-block;
    white-space: pre-line;
    font-family: $font-family-h;
    font-size: var(--font-quote-l);
    letter-spacing: -0.07rem;
    text-align: center;
    line-height: 1;
    font-weight: var(--weight-medium);
    color: var(--text);
    margin: 0;
  }

  &:has(p + p) p:last-child {
    display: block;
    margin-top: 1rem;
    font-family: $font-family-h !important;
    font-size: var(--font-quote-s);
    color: var(--text-secondary);
    font-family: $font-family-b;
    font-weight: var(--weight-regular);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }
}

// -------------------------------------------------------- selection

*::selection,
*::-moz-selection {
  background: var(--links) !important;
  color: var(--bg) !important;
}

// -------------------------------------------------------- table

table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--space-b) 0;
  font-size: var(--font-s);
  font-family: $font-family-h;
  line-height: 1.4;
  color: var(--text);
}

th, td {
  padding: 0.4em 0.6em;
  text-align: left;
  border-bottom: 1px solid color-mix(in srgb, var(--text-secondary) 50%, transparent);
}

th {
  font-size: var(--font-s);
  font-weight: 600;
  font-family: $font-family-h;
  line-height: 1;
  text-transform: uppercase;
  color: var(--text-secondary);
}

// -------------------------------------------------------- footnotes

.footnotes {
  color: var(--text);
  max-width: var(--footnote-width);
  scroll-margin-top: 5rem;

  ol,
  li {
    padding: 0;
    width: fit-content;
  }

  li {
    list-style-position: inside;

    &::marker {
      color: var(--text-secondary);
      font-family: $font-family-h;
      font-weight: var(--weight-bold);
      font-size: var(--font-h6);
    }
  }

  ol li p {
    font-size: var(--font-s);
    line-height: 1.4;
    width: fit-content;
  }
}

.footnotes ol li {
  scroll-margin-top: 10rem;
  margin-top: var(--space-l);
  margin-bottom: calc(var(--space-b) * 2);
}

sup {
  font-family: $font-family-h;
  font-weight: var(--weight-bold);
  font-size: var(--font-s);
  vertical-align: text-top;
  line-height: 0.3em;
  scroll-margin-top: 10rem;
  
  a {
    text-decoration: none;
  }
}

.reversefootnote {
  text-rendering: optimizeLegibility;
  text-decoration: none;
  display: block;
  margin-top: calc(var(--space-b) * 0.5);
  width: fit-content;

  &::before {
    content: "↑ zpět";
    font-family: $font-family-main;
    font-size: var(--font-s);
    font-weight: var(--weight-bold);
    letter-spacing: 0.04em;
    text-transform: uppercase;
    text-align: center;
  }

  &:hover {
    text-decoration: line-through;
  }
}

// -------------------------------------------------------- toc

#markdown-toc {
  position: relative;
  overflow: hidden;
  z-index: 1;
  gap: var(--gap-l);
  border-radius: var(--radius);
  box-shadow: var(--shadow-s);
  background-color: var(--transpa-mob);
  backdrop-filter: blur(var(--blur-l));
  -webkit-backdrop-filter: blur(var(--blur-l));
  padding: var(--gap-l) var(--gap-xl);
  max-width: var(--container-max, 90%);
  margin-inline: auto;
  box-sizing: border-box;
  list-style: none;
  counter-reset: toc-counter;
  white-space: normal;
  transform: translateY(-15vh);

  &::before {
    content: "Obsah";
    display: block;
    font-family: $font-family-h;
    font-size: var(--font-s);
    font-weight: var(--weight-medium);
    text-transform: uppercase;
    letter-spacing: var(--letter-wide);
    color: var(--text-secondary);
  }

  li {
    font-family: $font-family-h;
    line-height: 1.6;
    font-weight: var(--weight-medium);
    color: var(--text);
    margin: calc(var(--space-b) * 0.1) 0;
    list-style-type: none;
    position: relative;
    display: block;

    &::before {
      counter-increment: toc-counter;
      content: counter(toc-counter) ". ";
      color: var(--text);
    }

  }
}

.page-content h2,
.page-content h3,
.page-content h4,
.page-content h5,
.page-content h6 {
  position: relative;
}

.anchor-marker {
  position: absolute;
  left: 0;
  top: 0.15em;
  transform: translateX(-120%) rotate(-90deg);
  font-size: 0.8em;
  font-family: $font-family-main !important;
  font-weight: var(--weight-bold);
  color: var(--links);
  text-decoration: none;
  transition: all var(--transition-fast);

  &:hover {
    opacity: 1;
    color: var(--links);
    text-decoration: none;
  }
}

.scroll-anchor {
  scroll-margin-top: 20rem;
}

// -------------------------------------------------------- MOBILE -------------------------------------------------------- //
// -------------------------------------------------------- MOBILE -------------------------------------------------------- //

  @media (max-width: 800px) {
    p, li, table, figcaption, pre, code {
      line-height: var(--line-b);
    }

    blockquote {
      margin: var(--space-quote-top) 0;
    }

    ul, ol {
      padding-left: 1.2rem;
    }

    table {
      font-size: var(--font-s);
      display: block;
      overflow-x: auto;
    }

    .footnotes li {
      margin-top: var(--space-b);
      margin-bottom: var(--space-s) !important;
    }

    #markdown-toc {
      padding: var(--space-s) var(--space-b);
      transform: translateY(0);
    }

    .anchor-marker {
      position: static !important;
      display: inline-block;
      transform: rotate(-90deg); // zachováš otočení, ale už se neposouvá
      margin-right: 0.5rem;
      left: auto;
      top: auto;
    }
  }