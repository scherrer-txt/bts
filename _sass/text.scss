// -------------------------------------------------------- headers

h1, h2, h3, h4, h5, h6 {
  font-family: $font-family-h;
  letter-spacing: var(--letter-tight);
  text-rendering: geometricPrecision;
  scroll-margin-top: 5rem;
  font-weight: var(--weight-regular);
  color: var(--text-secondary);
  margin-top: var(--space-text-top);
  margin-bottom: var(--space-text-bottom);
}

h1 {
  font-size: var(--font-h1);
  line-height: 0.9;
}
h2 {
  font-size: var(--font-h2);
  line-height: 0.8;
}
h3 {
  font-size: var(--font-h3);
  line-height: 0.8;
  display: inline-block;
}
h4 {
  font-size: var(--font-h4);
  line-height: 0.8;
  display: inline-block;
}
h5 {
  font-size: var(--font-h5);
  line-height: 0.8;
  display: inline-block;
}
h6 {
  font-size: var(--font-h6);
  line-height: 1;
  text-transform: uppercase;
  display: inline-block;
}

// -------------------------------------------------------- body

p {
  font-size: var(--font-base);
  line-height: var(--line-base);
  letter-spacing: var(--letter-base);
  color: var(--text);
  margin-top: 0;
  margin-bottom: var(--space-text-bottom);
}


table, figcaption {
  font-size: var(--font-base);
  line-height: var(--line-base);
  letter-spacing: var(--letter-base);
  color: var(--text);
  margin-top: 0;
  margin-bottom: $space-base;
}

strong, b {
  font-weight: var(--weight-bold);
}

em, i {
  font-style: italic;
}

small {
  font-size: var(--font-s);
  color: var(--text);
  line-height: 1.4;
}

figcaption {
  font-size: var(--font-s);
  line-height: 1.4em;
  color: var(--text-secondary);
  text-align: center;
  margin-top: 0.5rem;
}

a {
  color: var(--links);
  text-decoration: underline;

  &:hover {
    color: var(--links-hover);
    text-decoration: line-through;
  }
}

// -------------------------------------------------------- code

p {
  code {
    display: block;
    font-family: $font-family-m;
    letter-spacing: -0.02rem;
    font-size: var(--font-mono);
    font-weight: var(--weight-regular);
    line-height: calc($space-base * 1.2) !important;
    color: var(--text);
  }
}

code {
  font-family: $font-family-m;
  letter-spacing: -0.02rem;
  font-size: var(--font-mono);
  font-weight: var(--weight-regular);
  line-height: calc($space-base * 0.5) !important;
  color: var(--text);
}

pre {
  position: relative;
  margin: $space-base 0;
  line-height: 1rem;

  &::before {
    content: ">";
    left: 0;
    top: 0;
    font-family: $font-family-m;
    letter-spacing: -0.02rem;
    font-size: var(--font-mono);
    color: var(--links);
    pointer-events: none;
  }
}

// -------------------------------------------------------- lists

ul,
ol {
  margin: 0 0 $space-base 0;
  padding-left: 1.5em;
  width: fit-content;
}

li {
  font-size: var(--font-base);
  line-height: 1.6;
  letter-spacing: var(--letter-base);
  color: var(--text);
  margin-top: 0;
  margin-bottom: var(--space-text-bottom);
}

li ul,
li ol {
  margin-top: calc($space-base * 0.25);
  margin-bottom: calc($space-base * 0.5);
  padding-left: 2em;
  list-style-type: disc;
}

li ul li {
  list-style-type: disc;
}

ul li {
  list-style-type: disc;
}

ul ul li {
  list-style-type: circle;
}

ul ul ul li {
  list-style-type: square;
}

ol li {
  list-style-type: decimal;
}

// -------------------------------------------------------- blockquote

blockquote {
  font-family: $font-family-h;
  font-size: var(--font-h3);
  letter-spacing: -0.07rem;
  text-align: center;
  line-height: 1;
  font-weight: var(--weight-medium);
  color: var(--text);
  overflow-wrap: break-word;
  align-self: center;
  margin: var(--space-blockquote-top) var(--space-blockquote-side);

  > p {
    display: inline-block;
    white-space: pre-line;
    font-family: $font-family-h;
    font-size: var(--font-h3);
    letter-spacing: -0.07rem;
    text-align: center;
    line-height: 1;
    font-weight: var(--weight-medium);
    color: var(--text);
    margin: 0;
  }

  &:has(p + p) p:last-child {
    display: block;
    margin-top: 1rem;
    font-family: $font-family-h !important;
    font-size: var(--font-h6);
    color: var(--text-secondary);
    font-family: $font-family-b;
    font-weight: var(--weight-regular);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }
}

// -------------------------------------------------------- selection

*::selection,
*::-moz-selection {
  background: var(--links) !important;
  color: var(--bg) !important;
}

// -------------------------------------------------------- table

table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--space-base) 0;
  font-size: var(--font-s);
  font-family: $font-family-h;
  line-height: 1.4;
  color: var(--text);
}

th, td {
  padding: 0.4em 0.6em;
  text-align: left;
  border-bottom: 1px solid color-mix(in srgb, var(--text-secondary) 50%, transparent);
}

th {
  font-size: var(--font-s);
  font-weight: 600;
  font-family: $font-family-h;
  line-height: 1;
  text-transform: uppercase;
  color: var(--text-secondary);
}

// -------------------------------------------------------- footnotes

.footnotes {
  color: var(--text);
  max-width: var(--footnote-width);
  scroll-margin-top: 5rem;

  ol,
  li {
    padding: 0;
    width: fit-content;
  }

  li {
    list-style-position: inside;

    &::marker {
      color: var(--text-secondary);
      font-family: $font-family-h;
      font-weight: var(--weight-bold);
      font-size: var(--font-h6);
    }
  }

  ol li p {
    font-size: var(--font-s);
    line-height: 1.4;
    width: fit-content;
  }
}

.footnotes ol li {
  scroll-margin-top: 10rem;
  margin-top: var(--space-text-top);
  margin-bottom: calc($space-base * 2);
}

sup {
  font-family: $font-family-h;
  font-weight: var(--weight-bold);
  font-size: var(--font-s);
  vertical-align: text-top;
  line-height: 0.3em;
  scroll-margin-top: 10rem;
  
  a {
    text-decoration: none;
  }
}

.reversefootnote {
  text-rendering: optimizeLegibility;
  text-decoration: none;
  display: block;
  margin-top: calc($space-base * 0.5);
  width: fit-content;

  &::before {
    content: "↑ zpět";
    font-family: $font-family-main;
    font-size: var(--font-s);
    font-weight: var(--weight-bold);
    letter-spacing: 0.04em;
    text-transform: uppercase;
    text-align: center;
  }

  &:hover {
    text-decoration: line-through;
  }
}

// -------------------------------------------------------- toc

#markdown-toc {
  position: relative;
  overflow: hidden;
  z-index: 1;
  gap: var(--gap-large);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
  background-color: var(--transpa-mob);
  backdrop-filter: blur(var(--blur-strong));
  -webkit-backdrop-filter: blur(var(--blur-strong));
  padding: var(--gap-large) var(--gap-xlarge);
  max-width: var(--container-max, 90%);
  margin-inline: auto;
  box-sizing: border-box;
  list-style: none;
  counter-reset: toc-counter;
  white-space: normal;
  transform: translateY(-15vh);

  &::before {
    content: "Obsah";
    display: block;
    font-family: $font-family-h;
    font-size: var(--font-s);
    font-weight: var(--weight-medium);
    text-transform: uppercase;
    letter-spacing: var(--letter-wide);
    color: var(--text-secondary);
  }

  li {
    font-family: $font-family-h;
    line-height: 1.6;
    font-weight: var(--weight-medium);
    color: var(--text);
    margin: calc($space-base * 0.1) 0;
    list-style-type: none;
    position: relative;
    display: block;

    &::before {
      counter-increment: toc-counter;
      content: counter(toc-counter) ". ";
      color: var(--text);
    }

  }
}

.page-content h2,
.page-content h3,
.page-content h4,
.page-content h5,
.page-content h6 {
  position: relative;
}

.anchor-marker {
  position: absolute;
  left: 0;
  top: 0.15em;
  transform: translateX(-120%) rotate(-90deg);
  font-size: 0.8em;
  font-family: $font-family-main;
  font-weight: var(--weight-bold);
  color: var(--links);
  text-decoration: none;
  transition: all var(--transition-fast);

  &:hover {
    opacity: 1;
    color: var(--links);
    text-decoration: none;
  }
}

.scroll-anchor {
  scroll-margin-top: 20rem;
}

// -------------------------------------------------------- MOBILE -------------------------------------------------------- //
// -------------------------------------------------------- MOBILE -------------------------------------------------------- //

  @media (max-width: 800px) {

  body {
    padding: 0 1.5rem;
  }

  h1, h2, h3, h4, h5, h6 {
    width: 100%;
    max-width: 100%;
    line-height: 1.1;
    margin-top: calc(var(--space-base) * 1.5);
    margin-bottom: calc(var(--space-base) * 0.5);
  }

  p, li, table, figcaption, pre, code {
    width: 100%;
    max-width: 100%;
    font-size: var(--font-base);
    line-height: var(--line-base);
  }

  blockquote {
    font-size: var(--font-h5);
    padding: 2rem 0;
    width: 100%;
    max-width: 100%;
  }

  ul, ol {
    padding-left: 1.2rem;
  }

  table {
    font-size: var(--font-s);
    display: block;
    overflow-x: auto;
  }

  .footnotes li {
    margin-bottom: calc(var(--space-base) * 0.5) !important;
  }

  #markdown-toc {
    width: 90%;
    padding: 1.5rem;
    font-size: var(--font-s);
    box-shadow: none;
    border-radius: 0;
  }

  .page-content h2,
  .page-content h3,
  .page-content h4,
  .page-content h5,
  .page-content h6 {
    padding-left: 0;
  }

  .anchor-marker {
    position: static;
    transform: none;
    margin-right: 0.5rem;
  }
}

